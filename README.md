# 🌤️ React 天气应用

一个使用React框架和天气API构建的现代化天气应用，支持实时天气数据展示、空气质量监测、气象预警和图表可视化。

## ✨ 功能特性

- 🌍 **多城市支持**: 支持搜索和切换不同城市的天气
- 📊 **实时数据**: 显示当前温度、湿度、风速、气压、能见度等详细信息
- 🌬️ **空气质量**: 实时AQI指数、PM2.5、PM10、O₃、NO₂、SO₂等六因子监测
- ⚠️ **气象预警**: 实时显示气象灾害预警信息，包括预警类型、级别和详细内容
- 📈 **图表可视化**: 使用ECharts展示24小时温度变化、天气分布和空气质量雷达图
- ⏰ **自动更新**: 每30分钟自动刷新天气数据，实时倒计时显示
- 🎨 **美观界面**: 现代化的渐变设计和响应式布局
- 📱 **移动端适配**: 完全响应式设计，支持各种设备
- 🔄 **数据刷新**: 支持手动刷新天气数据
- 📱 **模拟模式**: 当API不可用时自动切换到模拟数据模式

## 🚀 快速开始

### 环境要求

- Node.js 14.0 或更高版本
- npm 或 yarn 包管理器

### 安装步骤

1. 克隆项目

```bash
git clone <repository-url>
cd react-weather
```

2. 安装依赖

```bash
npm install
```

3. 配置API密钥

   - 访问 [天气API官网](http://www.tianqiapi.com/index/doc?version=2030) 注册账号
   - 在 `src/services/weatherApi.ts` 文件中
   - 将 `your_app_id_here` 替换为您的实际APP_ID
   - 将 `your_app_secret_here` 替换为您的实际APP_SECRET

4. 启动开发服务器

```bash
npm start
```

5. 在浏览器中打开 [http://localhost:3000](http://localhost:3000)

## 🔧 配置说明

### API配置

在 `src/services/weatherApi.ts` 文件中：

```typescript
const API_BASE_URL = 'http://gfeljm.tianqiapi.com/free/v2030';
const APP_ID = 'your_app_id_here'; // 替换为您的APP_ID
const APP_SECRET = 'your_app_secret_here'; // 替换为您的APP_SECRET
```

### API特性

- **免费额度**: 每日100次左右（个人免费使用3个月）
- **数据更新**: 5分钟更新一次
- **支持功能**:
  - 实况天气 + 24小时逐小时天气
  - 实时气象预警列表
  - 空气质量六因子监测
  - 生活建议（口罩、运动、外出、开窗等）

### 模拟数据

当API不可用或未配置时，应用会自动使用模拟数据，确保功能正常运行。

## 📱 使用说明

### 搜索城市

- 在搜索框中输入城市名称
- 点击搜索按钮或按回车键
- 支持热门城市快速选择

### 查看天气信息

- **实时天气**: 显示当前温度、天气状况、湿度、风速、气压、能见度等
- **温度范围**: 显示当日最高和最低温度
- **空气质量**: AQI指数、空气质量等级、健康建议
- **气象预警**: 实时预警信息，包括类型、级别和详细内容
- **日出日落**: 当日日出和日落时间
- **24小时预报**: 逐小时天气变化趋势和能见度变化

### 自动更新功能

- **定时更新**: 每30分钟自动刷新天气数据
- **实时倒计时**: 显示距离下次更新的具体时间（分:秒）
- **更新状态**: 显示最后更新时间和下次更新时间
- **智能触发**: 时间到达时自动触发数据更新
- **手动刷新**: 随时可以手动刷新获取最新数据

### 图表分析

- **24小时温度图**: 温度变化趋势和能见度变化
- **天气分布图**: 24小时内天气状况统计
- **空气质量雷达图**: PM2.5、PM10、O₃、NO₂、SO₂六因子可视化

### 数据模式切换

- **真实模式**: 使用天气API获取真实数据
- **模拟模式**: 使用本地生成的模拟数据

## 🚀 部署到 GitHub Pages

本项目已配置好GitHub Actions工作流，可以自动部署到GitHub Pages。

### 快速部署：

1. Fork 或克隆此仓库
2. 更新 `package.json` 中的 `homepage` 字段为您的GitHub用户名
3. 推送代码到GitHub
4. 在仓库设置中启用GitHub Pages（选择GitHub Actions源）

详细部署说明请查看 [DEPLOYMENT.md](./DEPLOYMENT.md) 文件。

## 🛠️ 技术栈

- **前端框架**: React 18 + TypeScript
- **图表库**: ECharts + echarts-for-react
- **HTTP客户端**: Axios
- **天气API**: 天气API免费接口
- **样式**: CSS3 + 响应式设计
- **构建工具**: Create React App

## 📁 项目结构

```
src/
├── components/          # React组件
│   ├── WeatherApp.tsx  # 主应用组件
│   ├── WeatherCard.tsx # 天气信息卡片
│   ├── WeatherCharts.tsx # 图表组件
│   ├── CitySearch.tsx  # 城市搜索组件
│   └── *.css          # 组件样式文件
├── services/           # API服务
│   └── weatherApi.ts  # 天气API接口
├── App.tsx            # 应用入口
└── index.tsx          # 渲染入口
```

## 🎨 设计特色

- **渐变背景**: 使用现代化的渐变色彩
- **卡片设计**: 圆角卡片布局，层次分明
- **图标系统**: 丰富的emoji图标增强视觉效果
- **动画效果**: 平滑的过渡动画和悬停效果
- **响应式**: 完美适配桌面端和移动端
- **预警显示**: 醒目的气象预警提示
- **空气质量**: 直观的AQI指数和健康建议

## 🔍 故障排除

### 常见问题

1. **API调用失败**

   - 检查网络连接
   - 验证APP_ID和APP_SECRET是否正确
   - 确认API调用次数是否超限
   - 应用会自动切换到模拟数据模式
2. **图表不显示**

   - 确保已安装ECharts依赖
   - 检查浏览器控制台是否有错误信息
3. **样式问题**

   - 清除浏览器缓存
   - 检查CSS文件是否正确加载

### API限制说明

- 免费版本每日限制100次左右
- 建议在生产环境中使用付费版本以获得更高调用限制
- 个人使用建议注册多个账号轮换使用

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

## 📞 支持

如果您在使用过程中遇到问题，请：

1. 查看本文档的故障排除部分
2. 检查GitHub Issues
3. 创建新的Issue描述问题

---

**注意**:

- 天气数据仅供参考，请以官方气象部门发布的信息为准
- 空气质量数据来自天气API，建议结合官方环保部门数据使用
- 气象预警信息具有时效性，请及时关注官方发布的最新预警
